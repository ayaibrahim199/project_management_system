<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <meta charset="UTF-8">
    <title>Home - Project Management</title>
    <link rel="stylesheet" th:href="@{/css/style.min.css}" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
</head>
<body>
    <header th:replace="~{fragments/navbar :: navbar}"></header>

    <main class="container">
        <section class="page-header">
            <div style="display:flex;gap:22px;align-items:center;">
                <img src="/img/logo.webp" alt="logo" style="height:86px;width:86px;border-radius:12px;object-fit:cover;box-shadow:var(--shadow);" />
                <div>
                    <h1>Welcome back, <span id="username" sec:authentication="name">User</span></h1>
                    <p style="margin-top:6px;max-width:680px;color:rgba(255,255,255,0.92);">Manage your projects, assign tasks, and collaborate with your teams — all in one place. Use the quick actions to jump in.</p>
                    <div style="margin-top:14px;display:flex;gap:12px;flex-wrap:wrap;">
                        <a th:href="@{/projects}" class="btn btn-create">+ New Project</a>
                        <a th:href="@{/tasks}" class="btn btn-secondary">Create Task</a>
                        <a th:href="@{/teams}" class="btn btn-success">Teams</a>
                    </div>
                </div>
            </div>
        </section>

        <div style="display:grid;grid-template-columns:1fr 340px;gap:24px;align-items:start;margin-top:18px;">
            <section>
                <div class="card" style="margin-bottom:18px;">
                    <div class="card-header"><h2>Overview</h2></div>
                    <div class="card-body" style="padding:12px 0 0 0;">
                        <div style="display:grid;grid-template-columns:repeat(3,1fr);gap:14px;">
                            <div class="card" style="padding:14px;text-align:center;">
                                <div style="font-size:22px;font-weight:700;color:var(--primary-color);" th:text="${projectsCount}">0</div>
                                <div style="color:var(--text-secondary);margin-top:6px;font-weight:600;">Projects</div>
                            </div>
                            <div class="card" style="padding:14px;text-align:center;">
                                <div style="font-size:22px;font-weight:700;color:var(--warning-color);" th:text="${openTasksCount}">0</div>
                                <div style="color:var(--text-secondary);margin-top:6px;font-weight:600;">Open Tasks</div>
                            </div>
                            <div class="card" style="padding:14px;text-align:center;">
                                <div style="font-size:22px;font-weight:700;color:var(--success-color);" th:text="${teamsCount}">0</div>
                                <div style="color:var(--text-secondary);margin-top:6px;font-weight:600;">Teams</div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="card" style="margin-bottom:18px;">
                    <div class="card-header"><h2>Recent Activity</h2></div>
                    <div class="card-body">
                        <ul class="activity-list" style="list-style:none;padding:0;margin:0;">
                            <li style="padding:12px 0;border-bottom:1px solid var(--border-color);">No recent activity yet. Create a project to get started.</li>
                        </ul>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header"><h2>Quick Links</h2></div>
                    <div class="card-body" style="display:flex;gap:12px;flex-wrap:wrap;padding:12px;">
                        <a th:href="@{/projects}" class="btn btn-primary" style="min-width:140px;">Projects</a>
                        <a th:href="@{/tasks}" class="btn btn-secondary" style="min-width:140px;">Tasks</a>
                        <a th:href="@{/teams}" class="btn btn-success" style="min-width:140px;">Teams</a>
                        <a th:href="@{/users}" class="btn btn-secondary" style="min-width:140px;">Users</a>
                    </div>
                </div>
            </section>

            <aside>
                <div class="card" style="margin-bottom:16px;">
                    <div class="card-header"><h2>Highlights</h2></div>
                    <div class="card-body">
                        <div style="display:flex;flex-direction:column;gap:12px;">
                            <div style="display:flex;justify-content:space-between;align-items:center;">
                                <div>
                                    <div style="font-weight:700;color:var(--text-primary);">Upcoming Deadlines</div>
                                    <div style="font-size:13px;color:var(--text-secondary);">No deadlines in the next 7 days.</div>
                                </div>
                            </div>
                            <div style="display:flex;justify-content:space-between;align-items:center;">
                                <div>
                                    <div style="font-weight:700;color:var(--text-primary);">Members Online</div>
                                    <div style="font-size:13px;color:var(--text-secondary);">0</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header"><h2>Tips</h2></div>
                    <div class="card-body">
                        <p style="color:var(--text-secondary);font-size:14px;margin:0;">Try creating a project and inviting team members. Use tasks to assign ownership and due dates.</p>
                    </div>
                </div>
            </aside>
        </div>
    </main>

    <footer style="padding:24px 0;text-align:center;color:var(--text-secondary);">
        <div class="container">© <span th:text="${#dates.format(#dates.createNow(),'yyyy')}">2025</span> Project Management</div>
    </footer>
    <script th:src="@{/js/home.js}"></script>
</body>
</html>
